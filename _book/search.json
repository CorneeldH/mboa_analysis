[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "How TO - MBOA Correlaties op teamniveau",
    "section": "",
    "text": "Introductie\nDeze gids laat zien hoe stap voor stap de exports uit het data warehouse worden bewerkt in R tot een correlatioe onderzoek op teamniveau. Het begint met uitleg van de project setup in R, daarna wordt de data ingelezen en geprepareerd. Vervolgens combineren we de data tot een zogenoemde data asset, die klaar is voor analyse.\nTenslotte kunnen we de data op teamniveau correleren en zo enkele grafieken maken.",
    "crumbs": [
      "Introductie"
    ]
  },
  {
    "objectID": "01_ingest.html",
    "href": "01_ingest.html",
    "title": "1  Inladen en voorbereiden",
    "section": "",
    "text": "1.1 Alles gerelateerd aan verbintenissen (enrollments) inladen en voorbereiden.\nWe laden eerst alle data in die al op verbintenis-niveau is. Een aantal tabellen zijn niet op verbintenis-niveau en bevatten ook geen verbintenis ID. Deze tabellen transformeren we naar student-jaar om het zo te kunnen koppelen aan verbintenis. Tenslotte zijn er nog een aantal mapping tables met extra informatie over een specifieke aspecten van een verbintenis.\nLaat code zien\nenrollments_basics &lt;- ingest_enrollments_basics() |&gt;\n    #'*INFO* prepare derived variables regarding 'studiesucces' after combining data with programmes\n    combine_enrollment_numbers_for_order()\nenrollments_level &lt;- ingest_enrollments_level() |&gt;\n    parse_enrollment_level()\nenrollments_flex &lt;- ingest_enrollments_flex() |&gt;\n    create_flex_boolean()\nenrollments_special_needs &lt;- ingest_enrollments_special_needs() |&gt;\n    summarise_special_needs()\nenrollments_study_advices &lt;- ingest_study_advices() |&gt;\n    transform_advices_to_enrollments()\nenrollments_application &lt;- ingest_enrollments_application() |&gt;\n    calculate_application_duration()\n\n# BPV statusses transformed\nbpv_registrations &lt;- ingest_bpv_registrations()\nbpv_statusses &lt;- ingest_bpv_statusses()\n\nenrollments_bpv &lt;- bpv_statusses |&gt;\n    left_join(bpv_registrations,\n              by = join_by(BPV_ID),\n              relationship = \"many-to-one\") |&gt;\n    convert_bpv_status_types() |&gt;\n    transform_bpv_statusses_to_enrollments() \n\n#' *INFO* An enrollment can be longer or shorter than one year\n# TODO Make extra calculations regarding demographics\nstudent_years_demographics &lt;- ingest_students_demographics() |&gt;\n    transform_students_to_student_year()\nstudent_years_prior_education &lt;- ingest_students_prior_education() |&gt;\n    transform_prior_education_to_student_year() |&gt;\n    transform_prior_education_vo_and_highest_degree()\n\n# Additional mapping tables\nreasons_for_leaving &lt;- ingest_reasons_for_leaving() |&gt;\n    distinct()\ncohorts &lt;- ingest_cohorts() |&gt;\n    filter_cohorts() |&gt;\n    add_cohort_start_date()\n# The following data is also linked to enrollments foremost, not programmes\nteams &lt;- ingest_teams()\nlocations &lt;- ingest_locations()\n\n# Programmes\nprogrammes_exam_plan &lt;- ingest_exam_plans() |&gt; \n    summarise_plan_dates_to_programmes()\nprogrammes_basics &lt;- ingest_programmes_basics()\nprogramme_bc_codes &lt;- ingest_programme_bc_codes()",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Inladen en voorbereiden</span>"
    ]
  },
  {
    "objectID": "01_ingest.html#alles-gerelateerd-aan-medewerkers-employees",
    "href": "01_ingest.html#alles-gerelateerd-aan-medewerkers-employees",
    "title": "1  Inladen en voorbereiden",
    "section": "1.2 Alles gerelateerd aan medewerkers (employees)",
    "text": "1.2 Alles gerelateerd aan medewerkers (employees)\nWe laden eerst informatie uit medewerkers contracten in. Deze data is per jaar aangeleverd met peildatum 1 oktober. Naast de contracten, zijn er ook componenten met aanpassingen. Tenslotte is er informatie over het verzuim van medewerkers. Deze zetten we om naar wekelijkse verzuimpercentages en één tabel per schooljaar.\n\n\nLaat code zien\nemployees_contract &lt;- bind_rows(\n    ingest_employees_contract_basics_2023(),\n    ingest_employees_contract_basics_2022(),\n    ingest_employees_contract_basics_2021(),\n    ingest_employees_contract_basics_2020(),\n    ingest_employees_contract_basics_2019()\n)\n\nemployees_contract_extra_fte &lt;- bind_rows(\n    ingest_job_components_extra_fte_2023(),\n    ingest_job_components_extra_fte_2022(),\n    ingest_job_components_extra_fte_2021(),\n    ingest_job_components_extra_fte_2020(),\n    ingest_job_components_extra_fte_2019()\n) |&gt;\n    summarise_components_to_employees()\n\n# Within map to keep the transformations separate by years, this makes it less memory intensive\nemployees_absence_yearly &lt;- ingest_employee_absences() |&gt;\n    distinct() |&gt;\n    convert_absence_types() |&gt;\n    split_absences_into_school_years() |&gt;\n    map(expand_to_daily) |&gt;\n    map(summarise_employee_absence_to_years) |&gt;\n    #map(summarise_employee_absence_to_weeks) |&gt;\n    #map(pivot_weeks_to_years) |&gt;\n    map_dfr(bind_rows)",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Inladen en voorbereiden</span>"
    ]
  },
  {
    "objectID": "01_ingest.html#alles-gerelateerd-aan-officiële-rendementen",
    "href": "01_ingest.html#alles-gerelateerd-aan-officiële-rendementen",
    "title": "1  Inladen en voorbereiden",
    "section": "1.3 Alles gerelateerd aan officiële rendementen",
    "text": "1.3 Alles gerelateerd aan officiële rendementen\n\n\nLaat code zien\nteams_results_retention_start &lt;- ingest_teams_results_retention_start()",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Inladen en voorbereiden</span>"
    ]
  },
  {
    "objectID": "01_ingest.html#alles-gerelateerd-aan-groepen-en-absenties",
    "href": "01_ingest.html#alles-gerelateerd-aan-groepen-en-absenties",
    "title": "1  Inladen en voorbereiden",
    "section": "1.4 Alles gerelateerd aan groepen en absenties",
    "text": "1.4 Alles gerelateerd aan groepen en absenties\n\n\nLaat code zien\nattendance_observations &lt;- ingest_attendance_observations() #|&gt;\n    #transform_observations_to_enrollments()\n\n# attendance_observations %&gt;% mutate(jaar = get_school_year(Datum)) %&gt;% tabyl(jaar)\n#      jaar       n    percent\n# 2021/2022 6146808 0.32698424\n# 2022/2023 5592001 0.29747085\n# 2023/2024 5303850 0.28214243\n# 2024/2025 1755825 0.09340248\n\nenrollment_to_sk_mapping &lt;- ingest_enrollment_to_sk_mapping()\ngroup_placements &lt;- ingest_group_placements()\n\n\ngroup_placements_enriched &lt;- group_placements |&gt;\n    # Enrollments absences only have SK_inschrijving that started over 2018, therefore this\n    # inner join removes half of rows\n    inner_join(enrollment_to_sk_mapping,\n               by = join_by(SK_inschrijving),\n               relationship = \"many-to-one\")\n\nattendance_observations_enriched &lt;- attendance_observations |&gt;\n    # I lose ~2400 enrollments\n    # maybe these are students from before 2018, mabye some are filtered in data warehouse \n    inner_join(group_placements_enriched,\n                by = join_by(SK_GroepInschrijving == SK_groep_inschrijving),\n               relationship = \"many-to-one\")\n\n# for enrollments per week\n# enrollments_attendance_weekly &lt;- attendance_observations_enriched |&gt;\n#     summarise_observations_to_weekly_attendance() |&gt;\n#     transform_attendance_weekly_to_enrollments()\n\nenrollments_attendance_yearly &lt;- attendance_observations_enriched |&gt;\n    split_observations_in_school_years() |&gt;\n    map(summarise_observations_to_yearly_attendance) |&gt;\n    map_dfr(bind_rows)\n\n\n\n\nLaat code zien\nteams_results_retention_start_prepared &lt;- teams_results_retention_start |&gt;\n    mutate(SCHOOLJAAR_naam = str_replace(SCHOOLJAAR_naam, \" - \", \"/\"),\n           TEAM_startersresultaat_1_jaars = parse_number(TEAM_startersresultaat_1_jaars) * 100\n           )",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Inladen en voorbereiden</span>"
    ]
  }
]